<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kdub Productions</title>
    <link rel="stylesheet" type="text/css" href="mainstyle.css">
</head>
<body>
    <div id="maindiv">
        <!-- Header Section -->
        <div class="heading_1_div">
            <h2 class="heading_1">Kdub Productions</h2>
            <p class="artist-header">Artists</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-button" id="videosTab">Videos</button>
            <button class="tab-button" id="mixtapesTab">Mixtapes</button>
        </div>

        <!-- Search Bar -->
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search for videos..." />
        </div>

        <!-- Artist List -->
        <div id="artist_div_grid">
            <ul class="artist_list">
                <li><a class="name" href="https://www.youtube.com/@KalebMay_1" target="_blank">Kaleb May</a></li>
                <li><a class="name" href="https://www.youtube.com/@YungBlazer777" target="_blank">PrimoSKT</a></li>
                <li><a class="name" href="https://www.youtube.com/@rahkYung" target="_blank">Yung Rahk</a></li>
            </ul>
        </div>

        <!-- Video Grid (for videos) -->
        <div class="songs_div" id="videoGrid">
            <div class="grid-container" id="video-grid"></div>
        </div>

        <!-- Mixtape Grid (for mixtapes) -->
        <div class="songs_div" id="mixtapeGrid" style="display: none;">
            <div class="grid-container" id="mixtape-grid"></div>
        </div>

        <!-- Pagination -->
        <div class="pagination">
            <button id="prev-btn" onclick="previousPage()">Previous</button>
            <button id="next-btn" onclick="nextPage()">Next</button>
        </div>
    </div>

    <script>
        const apiKey = "AIzaSyBWXAiWVwtsv3lrMKC3eXSQs7UqjSVWLt8"; // Replace with your YouTube API key
        const channelId = "UCxLInTOesiaJPHRcr-q56aQ"; // Replace with your YouTube channel ID
        const videosPerPage = 12;
        let videos = [];
        let mixtapes = []; // New mixtapes array
        let nextPageToken = "";
        let prevPageToken = "";

        // Fetch videos from YouTube API
        async function fetchVideos(pageToken = "") {
            const url = `https://www.googleapis.com/youtube/v3/search?key=${apiKey}&channelId=${channelId}&part=snippet&type=video&maxResults=${videosPerPage}&pageToken=${pageToken}`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                // Check for API errors
                if (data.error) {
                    console.error("API Error:", data.error.message);
                    alert("An error occurred: " + data.error.message);
                    return;
                }

                // Extract video data
                videos = data.items.map((item) => ({
                    src: `https://www.youtube.com/embed/${item.id.videoId}`,
                    title: item.snippet.title,
                }));
                nextPageToken = data.nextPageToken || null;
                prevPageToken = data.prevPageToken || null;

                showPage("videos"); // Show videos initially
            } catch (error) {
                console.error("Fetch Error:", error);
                alert("Failed to fetch videos. Check the console for details.");
            }
        }

        // Fetch mixtapes from YouTube API
        async function fetchMixtapes() {
            const url = `https://www.googleapis.com/youtube/v3/playlists?key=${apiKey}&channelId=${channelId}&part=snippet&maxResults=${videosPerPage}`;

            try {
                const response = await fetch(url);
                const data = await response.json();

                // Check for API errors
                if (data.error) {
                    console.error("API Error:", data.error.message);
                    alert("An error occurred: " + data.error.message);
                    return;
                }

                // Extract mixtape data
                mixtapes = data.items.map((item) => ({
                    src: `https://www.youtube.com/embed/?listType=playlist&list=${item.id}`,
                    title: item.snippet.title,
                }));

                showPage("mixtapes"); // Show mixtapes when fetched
            } catch (error) {
                console.error("Fetch Error:", error);
                alert("Failed to fetch mixtapes. Check the console for details.");
            }
        }

        // Display videos or mixtapes
        function showPage(type) {
            const videoGrid = document.getElementById("videoGrid");
            const mixtapeGrid = document.getElementById("mixtapeGrid");

            if (type === "videos") {
                videoGrid.style.display = "block";
                mixtapeGrid.style.display = "none";
                displayGrid(videos, "video-grid");
            } else if (type === "mixtapes") {
                mixtapeGrid.style.display = "block";
                videoGrid.style.display = "none";
                displayGrid(mixtapes, "mixtape-grid");
            }

            updateButtonStates();
        }

        // Display the grid of videos or mixtapes
        function displayGrid(items, gridId) {
            const gridContainer = document.getElementById(gridId);
            gridContainer.innerHTML = ""; // Clear current items

            items.forEach((item) => {
                const gridItem = document.createElement("div");
                gridItem.classList.add("grid-item");

                const iframe = document.createElement("iframe");
                iframe.src = item.src;
                iframe.allowFullscreen = true;

                const description = document.createElement("p");
                description.innerHTML = `<strong>Title:</strong> ${item.title}`;

                gridItem.appendChild(iframe);
                gridItem.appendChild(description);
                gridContainer.appendChild(gridItem);
            });
        }

        // Handle pagination
        function nextPage() {
            if (nextPageToken) fetchVideos(nextPageToken);
        }

        function previousPage() {
            if (prevPageToken) fetchVideos(prevPageToken);
        }

        // Update pagination buttons
        function updateButtonStates() {
            document.getElementById("prev-btn").style.display = prevPageToken ? "inline-block" : "none";
            document.getElementById("next-btn").style.display = nextPageToken ? "inline-block" : "none";
        }

        // Event listeners for tab switches
        document.getElementById("videosTab").addEventListener("click", function() {
            showPage("videos");
        });

        document.getElementById("mixtapesTab").addEventListener("click", function() {
            fetchMixtapes(); // Fetch mixtapes when the tab is clicked
        });

        // Initial fetch of videos
        fetchVideos();

        // Animations

        document.addEventListener('DOMContentLoaded', () => {
    // Select all tab buttons
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    // Add event listeners to tab buttons
    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            // Remove active class from all tabs and contents
            tabButtons.forEach(btn => btn.classList.remove('active'));
            tabContents.forEach(content => {
                content.classList.remove('active', 'enter', 'leave');
            });

            // Add active class to clicked tab and show corresponding content
            button.classList.add('active');
            const targetContent = document.querySelector(button.getAttribute('data-target'));
            targetContent.classList.add('active', 'enter');

            // Add leave class to the previously active tab content
            const previousContent = document.querySelector('.tab-content.active:not(.enter)');
            if (previousContent) {
                previousContent.classList.add('leave');
            }
        });
    });
});

    </script>
</body>
</html>
